<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <script src="js/fixScreen750.js"></script>
    <title>主页</title>
    <link rel="stylesheet" href="css/base.css"/>
    <link rel="stylesheet" href="css/home.css"/>
</head>
<body style="height: 100%;width: 100%;margin: 0;padding: 0;">
    <!-- header begin-->
    <header>
        <div class="head">
            <div class="search">
                <input type="text" value="目的地/景点/关键字"/>
                <i></i>
                <s></s>
            </div>
            <div class="scan">
                <span></span>
                <input type="text"/>
            </div>
        </div>
        <div class="bg"></div>
        <div class="cav">
            <canvas id="gameCanvas" style=" height: 100%;width: 100%;margin: 0;padding: 0;display: block;"></canvas>
        </div>
    </header>
    <!-- header end-->
    <!-- section begin-->
    <section>
        <ul>
            <li class="show other"><i class="i1"></i><span>景点</span><a href="./model/hs/travel.html"></a></li>
            <li class="show other"><i class="i2"></i><span>路线</span><a href="./model/lt/map.html"></a></li>
            <li class="show other"><i class="i3"></i><span>周边</span><a href="./model/ww/hotel.html"></a></li>
            <li class="show"><i class="i4"></i><span>天气</span><a href="#"></a></li>
            <li class="other"><i class="i5"></i><span>美食</span><a href="#"></a></li>
            <li class="other"><i class="i6"></i><span>娱乐</span><a href="./model/zl/yule/index.html"></a></li>
            <li class="other"><i class="i7"></i><span>购物</span><a href="./model/xwh/shopping.html"></a></li>
            <li ><i class="i8"></i><a href="./model/wzh/ask.html"><span>社区</span></a></li>
        </ul>
    </section>
    <!-- section end-->
    <!-- footer begin-->
    <footer>
        <a class="tab-item external " href="./model/hs/order.html">
            <span class="icon icon-order"></span>
            <span class="tab-label">订单</span>
        </a>
        <a class="tab-item external-home" href="#">
            <span class="icon icon-collect"></span>
            <span class="tab-label">收藏</span>
        </a>
        <a class="tab-item external" href="./model/wzh/index.html">
            <i></i>
            <span class=" icon-home"></span>
            <span class="tab-label"></span>
        </a>
        <a class="tab-item external" href="./model/xwh/classify.html">
            <span class="icon icon-class"></span>
            <span class="tab-label">类别</span>
        </a>
        <a class="tab-item external" href="./model/lt/yonghu.html">
            <span class="icon icon-me"></span>
            <span class="tab-label">我的</span>
        </a>
    </footer>
    <!-- footer end-->
    <!--====== -->
    <!--= js = -->
    <!--====== -->
    <script src="js/jquery-1.11.3.min.js"></script>
    <script src="js/commonFunctions.js"></script>
    <script src="js/star.js"></script>
    <script>
        //w:宽 h:高 num:数量 stars:放star对象的数组
        var can;
        var ctx;
        var cav;
        var w;
        var h;
        var starPic = new Image();
        var cityPic = new Image();
        var num = 20;
        var stars=[];

        var deltaTime;//当前刷新的时间
        var lastTime;//上一次刷新的时间
        //初始化
        function init() {
            //console.log("a");//@T:true
            //获取画布
            can = document.querySelector("canvas");
            //获取canvas2d场景工具,画笔
            ctx = can.getContext("2d");
            //容器
            cav = document.querySelector(".cav");
            //初始化宽高
            w = can.width;
            h = can.height;
            console.log(w+"和"+h);
            cityPic.src="images/canHome.png";
            starPic.src="images/star.png";

            //循环new stars对象
            for(var i=0;i<num;i++){
                stars[i] = new starObj();
                //初始化
                stars[i].init();
            }

            lastTime = Date.now();
            gameloop();
        }
        document.body.onload = init;

        //刷新canvas画布
        function gameloop() {
            window.requestAnimFrame(gameloop);
            var now = Date.now();
            deltaTime = now - lastTime;
            lastTime = now;
            console.log(deltaTime);
            drawBg();//@T
            drawStars();
        }
        //画背景方法封装 w:宽 h:高
        function drawBg() {
            //fillRect() 方法使用 fillStyle 属性所指定的
            // 颜色、渐变和模式来填充指定的矩形
            ctx.drawImage(cityPic, 0, 0, w, h);
        }
    </script>

</body>
</html>